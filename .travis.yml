dist: trusty
sudo: false
git:
  depth: false
env:
  global:
    - CC_TEST_REPORTER_ID=53eef44d00d3465aeaf806ea310cfc5497e7473d13ae05fbc753890c39712c60
addons:
  sonarcloud:
    organization: "lucacappelletti94-github"
    token:
      secure: "PVPIfAy/TwdsGWl1Lx3/AsM6V4l2bOEaEvtwPQ3xE4tqMz4qJA3EtWTnBUNYYISswgZl8FAPm9Yd1ZTImb4xAKH4vJZqww00awJeDrYNhEFCWV/FR3k/9lerTur53sa91b9zb2zd/oIZBwtqfkWHRRE35XJEITnc4R5odHCHc6uOsB5CK7IwrFo49AeEvRsw9bxTSfN9ALXyAyaX+CQ6yZY/jSKo8Fo2FNTEivGoRLs7JdvTvrQ5ofqv7zvNIOvjdtlreeeZxjGq8CzcpxVOBJAIkJTlfmG8jfQIyoz1U6GBUG6bdMwQ+9NJ27+EpJZIJQtIWKoBR6fIkNo2t0riIodFCGkMCIRvDl2D3c3n/uZ2octAwHZvH2GsQiBJTWjUp4PXiOzMIPI9lG2I3B4XeJsZMGgwEjBglYyyuW6OBTFoQ4iIL73e9K/s7VQrhLsx6tNlBUx7/OOvEcWoTWMs9zHIiqFEX+AKwJy0+fwoMt+aa4ZJV1LDRMuocizZL0iLXx5/ZemaI99AtkjkntCugltb79oPnOO6mDF71LRNVF5MDsRgl23rY8Q+8iA0PP2q+eKwX3tkc6u3idEanscXNS2rUGDejjOoGWy3TTyjQqUF2MbIdFSRhnz3hhO8BarzA5Ry1//x+UMXjPJ3H1PTrFD1wbE5am9DQJ6ckgmefoc="
language: python
python:
- '3.6'
before_install:
  - pip install --upgrade pytest
install:
- pip install .[test]
before_script:
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - chmod +x ./cc-test-reporter
  - ./cc-test-reporter before-build
after_script:
  - ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT
script:
- rm -rf .coverage
- coverage erase
- pytest --cov=extra_keras_metrics --cov-report xml:coverage.xml 
- coverage report
- coverage xml
- sonar-scanner

after_success:
  - coveralls

notifications:
  webhooks: https://fathomless-fjord-24024.herokuapp.com/notify
  email: false
